# Медиацентр для обработки видеопотоков

Общий центр обрабоки видеопотоков для оптимизированной передачи подключенным клиентам по WebSocket.

## 1. Возможности

- Использование аппаратных ускорителей
- Использование **GStreamer pipeline** для разгрузки CPU
- Передача видео по **WebSocket**
- Синхронизация потоков

## 2. Зависимости

Для работы сигналинг сервера необходим `boost::beast`

Установка пакетов в **Linux**:
> sudo apt install libboost-all-dev

Либо установить вручную на сайте [Boost](https://www.boost.org/releases/1.89.0/)

## 3. Установка

## 4. Архитектура приложения

## 4. Использование

Камеры обмениваются сообщениями с сигналинг сервером в формате json. В любом таком сообщении содержится поле **type**, которое отвечает за взаимдействие.

Форматы url, по которым осуществляется обмен сообщениями:

1. `ws://<ip_address>:<port>/client/<room_name>` - подключение клиента к комнате
2. `ws://<ip_address>:<port>/camera/<room_name>` - подключение камеры к комнате

> В случае, если камера будет подключаться к уже существующей комнате - будет ошибка. Только одна камера на одну комнату. Так клиенты, находящиеся в одной комнате будут получать изображение только с одной камеры.

Ниже представлен формат json, по которому осуществляется взаимодействие:

`error`
`room_created`
`client_added`